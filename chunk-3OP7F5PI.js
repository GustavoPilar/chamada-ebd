import{a as V,b as W,c as M}from"./chunk-7T22VIRD.js";import{a as P,b as B}from"./chunk-JE5ZA7TI.js";import"./chunk-U4EO7VLT.js";import{B as E,D as I,N,U as x,h as f,j as T,k as h,m as w,n as _,o as F,q as S}from"./chunk-4QPRMCSV.js";import{Aa as C,Fa as g,Pa as b,Qa as y,U as c,V as u,Va as o,Wa as a,Xa as s,Ya as d,db as D,fb as v,gb as p,qa as r,va as m}from"./chunk-NCFPMDGA.js";function G(l,A){if(l&1){let e=D();a(0,"form",0)(1,"div",1)(2,"div",2),d(3,"app-label",3)(4,"p-select",4),s(),a(5,"div",2),d(6,"app-label",5)(7,"p-select",6),s(),a(8,"div",2),d(9,"app-label",7),a(10,"p-datePicker",8),v("onSelect",function(t){c(e);let n=p();return u(n.onChangeWeedingDate(t))})("onClear",function(t){c(e);let n=p();return u(n.onChangeWeedingDate(t))}),s()(),a(11,"div",2),d(12,"app-label",9)(13,"p-inputNumber",10),s()()()}if(l&2){let e=p();o("formGroup",e.entityForm),r(3),o("abstractControl",e.getField("husband")),r(),o("options",e.members),r(2),o("abstractControl",e.getField("wife")),r(),o("options",e.members),r(2),o("abstractControl",e.getField("weedingDateTime")),r(3),o("abstractControl",e.getField("totalTime")),r(),o("min",0)("disabled",!0)}}var O=class l extends W{constructor(e,i,t,n){super(e,i,t,n);this.crudManager=e;this.apiService=i;this.formBuilder=t;this.dialogService=n}members;ngOnInit(){super.ngOnInit()}getDisplayColumns(){return[{field:"husband.name",label:"Esposo",displayColumnType:4},{field:"wife.name",label:"Esposa",displayColumnType:4},{field:"weedingDateTime",label:"Data de casamento",displayColumnType:3},{field:"totalTime",label:"Tempo total",displayColumnType:1}]}getTypeDescription(){return new M("Anivers\xE1rio de casamento","Anivers\xE1rios de casamentos",!1)}getForm(){let e=new Date(this.selectedEntity?.weedingDateTime);return e.toString()=="Invalid Date"&&(e=new Date),console.log(this.selectedEntity),this.formBuilder.group({husband:[this.selectedEntity?.husband??null,f.required],wife:[this.selectedEntity?.wife??null,f.required],weedingDateTime:[e],totalTime:[this.selectedEntity?.totalTime??null]})}loadResources(){return Promise.all([this.loadMembers()])}onChangeWeedingDate(e){if(e==null){this.entityForm.get("totalTime")?.setValue(null);return}let i=this.currentDate.getFullYear(),t=e.getFullYear(),n=i-t;this.entityForm.get("totalTime")?.setValue(n)}loadMembers(){return new Promise((e,i)=>{try{this.apiService.getEntities("member").then(t=>{t&&(this.members=t,e(t))},t=>{i(t)})}catch(t){console.log(t),i(t)}})}static \u0275fac=function(i){return new(i||l)(m(V),m(P),m(S),m(x))};static \u0275cmp=C({type:l,selectors:[["app-weeding-date"]],standalone:!1,features:[g],decls:1,vars:1,consts:[[3,"formGroup"],[1,"grid"],[1,"field","col-12","md:col-6"],["description","Esposo",3,"abstractControl"],["dataKey","name","optionLabel","name","formControlName","husband","fluid","","filter","",3,"options"],["description","Esposa",3,"abstractControl"],["dataKey","name","optionLabel","name","formControlName","wife","fluid","","filter","",3,"options"],["description","Data de casamento",3,"abstractControl"],["id","weedingDateTime","inputId","weedingDateTime","formControlName","weedingDateTime","dateFormat","dd/mm/yy","fluid","","showIcon","true","showClear","true","placeholder","Selecione a data de nascimento",3,"onSelect","onClear"],["description","Tempo juntos",3,"abstractControl"],["id","totalTime","inputId","totalTime","formControlName","totalTime","fluid","","showButtons","true","showClear","false","placeholder","Tempo juntos",3,"min","disabled"]],template:function(i,t){i&1&&b(0,G,14,9,"form",0),i&2&&y(t.isForm&&t.selectedEntity?0:-1)},dependencies:[w,T,h,F,_,I,N,E,B],encapsulation:2})};export{O as WeedingDateComponent};
