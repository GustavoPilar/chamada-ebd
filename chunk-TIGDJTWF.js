import{a as s}from"./chunk-JE5ZA7TI.js";import{U as u,q as y}from"./chunk-4QPRMCSV.js";import{Aa as p,M as c,Q as l,va as o,zb as m}from"./chunk-NCFPMDGA.js";var a=class n{constructor(e){this.apiService=e}entityName;entityId;initialize(e){this.entityName=e.entityName,this.entityId=e.entityId}getEntities(){return new Promise((e,r)=>{try{this.apiService.getEntities(this.entityName).then(i=>{i&&e(i)},i=>{r(i)})}catch(i){console.log(i),r(i)}})}getEntityById(){return new Promise((e,r)=>{try{this.entityId>0?this.apiService.getEntityById(this.entityName,this.entityId).then(i=>{i&&e(i)},i=>{r(i)}):e({id:0})}catch(i){console.log(i),r(i)}})}createEntity(e){return new Promise((r,i)=>{try{this.apiService.createEntity(this.entityName,e).then(t=>{t&&r(t)},t=>{i(t)})}catch(t){console.log(t),i(t)}})}updateEntity(e){return new Promise((r,i)=>{try{this.apiService.updateEntity(this.entityName,this.entityId,e).then(t=>{t&&r(t)},t=>{i(t)})}catch(t){console.log(t),i(t)}})}deleteEntities(e){return new Promise((r,i)=>{try{this.apiService.deleteEntities(this.entityName,e).then(t=>{t&&r(t)},t=>{i(t)})}catch(t){console.log(t),i(t)}})}static \u0275fac=function(r){return new(r||n)(l(s))};static \u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})};var d=class n{constructor(e,r,i,t){this.crudManager=e;this.apiService=r;this.formBuilder=i;this.dialogService=t}entityName;entityId;selectedEntity;entities;selectedEntities=[];isForm=!1;isList=!1;entityForm;currentDate=new Date;ngOnInit(){}ngAfterViewInit(){}initList(){return new Promise((e,r)=>{try{this.crudManager.initialize(this),this.crudManager.getEntities().then(i=>{i&&(this.entities=i,e(i))},i=>{r(i)})}catch(i){console.log(i),r(i)}})}initForm(){return new Promise((e,r)=>{try{this.crudManager.initialize(this),this.loadResources().then(i=>{i&&this.crudManager.getEntityById().then(t=>{t&&(this.selectedEntity=t,this.entityForm=this.getForm(),e(t))},t=>{r(t)})},i=>{r(i)})}catch(i){console.log(i),r(i)}})}loadResources(){return Promise.all([])}canSave(){return this.entityForm?.valid??!1}getField(e){return this.entityForm.get(e)}getSpecialOptions(){return[]}prepareEntityToSave(){let e=this.entityForm.value;return e.id=this.selectedEntity.id,e}save(){return new Promise((e,r)=>{try{this.selectedEntity.id>0?this.crudManager.updateEntity(this.prepareEntityToSave()).then(i=>{i&&e(i)},i=>{r(i)}):this.crudManager.createEntity(this.prepareEntityToSave()).then(i=>{i&&e(i)},i=>{r(i)})}catch(i){console.log(i),r(i)}})}deleteEntities(){return new Promise((e,r)=>{try{this.crudManager.deleteEntities(this.selectedEntities.map(i=>i.id)).then(i=>{i&&(this.selectedEntities=[],this.crudManager.getEntities().then(t=>{t&&(this.entities=t,e(t))},t=>{r(t)}))},i=>{r(i)})}catch(i){console.log(i),r(i)}})}static \u0275fac=function(r){return new(r||n)(o(a),o(s),o(y),o(u))};static \u0275cmp=p({type:n,selectors:[["app-crud-base"]],standalone:!1,features:[m([a])],decls:0,vars:0,template:function(r,i){},encapsulation:2})};var h=class{single;plural;isFemale;constructor(e,r,i){this.single=e,this.plural=r,this.isFemale=i}};export{a,d as b,h as c};
