import{a as Y}from"./chunk-3O54TU7V.js";import{a as u,b as j,c as q}from"./chunk-7T22VIRD.js";import{a as k,b as R}from"./chunk-JE5ZA7TI.js";import"./chunk-U4EO7VLT.js";import{c as G}from"./chunk-73GDRVW2.js";import{B as x,D as O,F as P,H as A,N as V,U as L,g as F,h as c,j as _,k as T,m as N,n as E,o as B,q as w,u as M}from"./chunk-4QPRMCSV.js";import{Aa as y,Fa as C,Pa as g,Qa as h,U as f,V as b,Va as r,Wa as a,Xa as s,Ya as l,db as v,fb as D,gb as d,qa as o,va as p,vd as S,zb as I}from"./chunk-NCFPMDGA.js";function U(m,K){if(m&1){let e=v();a(0,"form",0)(1,"div",1)(2,"div",2),l(3,"app-label",3),a(4,"p-iconField"),l(5,"input",4)(6,"p-inputIcon",5),s()(),a(7,"div",2),l(8,"app-label",6)(9,"p-toggleButton",7),s(),a(10,"div",2),l(11,"app-label",8),a(12,"p-datePicker",9),D("onSelect",function(t){f(e);let n=d();return b(n.onChangeBirthday(t))})("onClear",function(t){f(e);let n=d();return b(n.onChangeBirthday(t))}),s()(),a(13,"div",2),l(14,"app-label",10)(15,"p-inputNumber",11),s(),a(16,"div",2),l(17,"app-label",12)(18,"p-select",13),s()()()}if(m&2){let e=d();r("formGroup",e.entityForm),o(3),r("abstractControl",e.getField("name")),o(5),r("abstractControl",e.getField("status")),o(3),r("abstractControl",e.getField("birthday")),o(3),r("abstractControl",e.getField("age")),o(),r("min",0)("disabled",!0),o(2),r("abstractControl",e.getField("class")),o(),r("options",e.classes)}}var J=class m extends j{constructor(e,i,t,n){super(e,i,t,n);this.crudManager=e;this.apiService=i;this.formBuilder=t;this.dialogService=n}classes;birthdayDialog;ngOnInit(){super.ngOnInit()}getDisplayColumns(){return[{field:"name",label:"Nome",displayColumnType:0},{field:"age",label:"Idade",displayColumnType:1},{field:"birthday",label:"Data Nasc.",displayColumnType:3},{field:"status",label:"Ativo",displayColumnType:2},{field:"class.name",label:"Classe",displayColumnType:4}]}getTypeDescription(){return new q("Membro","Membros",!1)}getForm(){let e=new Date(this.selectedEntity?.birthday);return e.toString()=="Invalid Date"&&(e=new Date),this.formBuilder.group({name:[this.selectedEntity?.name??null,c.required],age:[this.selectedEntity?.age??0],birthday:[e],status:[this.selectedEntity?.status??!0,c.required],class:[this.selectedEntity?.class??null,c.required]})}loadResources(){return Promise.all([this.loadClasses()])}getSpecialOptions(){return[{buttonIcon:S.GIFT,buttonAction:()=>this.openBirthdayDialog()}]}onChangeBirthday(e){if(e==null){this.entityForm.get("age")?.setValue(0);return}let i=this.currentDate.getFullYear(),t=e.getFullYear(),n=i-t;this.entityForm.get("age")?.setValue(n)}loadClasses(){return new Promise((e,i)=>{try{this.apiService.getEntities("class").then(t=>{t&&(this.classes=t,e(t))},t=>{i(t)})}catch(t){console.log(t),i(t)}})}openBirthdayDialog(){this.birthdayDialog=this.dialogService.open(Y,{data:{entities:this.entities},header:"Anivers\xE1rios",closable:!0,closeOnEscape:!1,draggable:!1,styleClass:"w-11 h-full overflow-visible"}),this.birthdayDialog?.onClose.subscribe(e=>{})}static \u0275fac=function(i){return new(i||m)(p(u),p(k),p(w),p(L))};static \u0275cmp=y({type:m,selectors:[["app-Member"]],standalone:!1,features:[I([u]),C],decls:1,vars:1,consts:[[3,"formGroup"],[1,"grid"],[1,"field","col-12","md:col-6"],["description","Nome",3,"abstractControl"],["type","text","pInputText","","id","name","formControlName","name","fluid","","placeholder","Digite o nome"],[1,"pi","pi-user"],["description","Status",3,"abstractControl"],["id","status","formControlName","status","onLabel","Ativo","offLabel","Inativo","fluid",""],["description","Data de nascimento",3,"abstractControl"],["id","birthday","inputId","birthday","formControlName","birthday","dateFormat","dd/mm/yy","fluid","","showIcon","true","showClear","true","placeholder","Selecione a data de nascimento",3,"onSelect","onClear"],["description","Idade",3,"abstractControl"],["id","age","inputId","age","formControlName","age","fluid","","showButtons","true","showClear","false","placeholder","Digite a idade",3,"min","disabled"],["description","Classe",3,"abstractControl"],["dataKey","name","optionLabel","name","formControlName","class","fluid","",3,"options"]],template:function(i,t){i&1&&g(0,U,19,9,"form",0),i&2&&h(t.isForm&&t.selectedEntity?0:-1)},dependencies:[N,F,_,T,B,E,M,O,G,A,P,V,x,R],encapsulation:2})};export{J as MemberComponent};
